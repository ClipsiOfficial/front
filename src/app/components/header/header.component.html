<header class="border-b border-border bg-card sticky top-0 z-50">
  <div class="container mx-auto px-4">
    <div class="h-16 flex items-center justify-between">

      <!-- Logo (siempre visible) -->
      <div class="flex items-center">
        <img src="/clipsi-logo.png" alt="Clipsi" class="h-7 md:h-8" />
      </div>

      <!-- ACCIONES QUE SIEMPRE SE VEN (theme + user) -->
      <div class="flex items-center gap-3" *ngIf="isMinimal">
        <!-- theme toggle -->
        <button mat-icon-button (click)="toggleTheme()"
                [matTooltip]="actualTheme() === 'dark' ? 'Cambiar a claro' : 'Cambiar a oscuro'">
          <mat-icon *ngIf="actualTheme() === 'dark'">dark_mode</mat-icon>
          <mat-icon *ngIf="actualTheme() !== 'dark'">light_mode</mat-icon>
        </button>

        <!-- user -->
        <button mat-icon-button matTooltip="Perfil de usuario"
                class="!bg-primary !text-primary-foreground">
          <mat-icon>account_circle</mat-icon>
        </button>
      </div>

      <!-- Todo lo demás solo si NO es minimal -->
      <ng-container *ngIf="!isMinimal">
        <!-- Desktop Navigation -->
        <nav class="hidden md:flex flex-1 justify-center">
          <div
            class="inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground max-w-2xl">
            
            <a routerLink="/results" routerLinkActive="bg-background text-foreground shadow"
              class="inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-1.5 text-sm font-medium">
              Resultados
            </a>

            <a routerLink="/my-news" routerLinkActive="bg-background text-foreground shadow"
              class="inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-1.5 text-sm font-medium">
              Mis Noticias
            </a>

            <a routerLink="/statistics" routerLinkActive="bg-background text-foreground shadow"
              class="inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-1.5 text-sm font-medium">
              Estadísticas
            </a>

          </div>
        </nav>

        <!-- Desktop Actions -->
        <div class="hidden md:flex items-center gap-3">
          <!-- theme -->
          <button mat-icon-button (click)="toggleTheme()"
                  [matTooltip]="actualTheme() === 'dark' ? 'Cambiar a claro' : 'Cambiar a oscuro'">
            <mat-icon *ngIf="actualTheme() === 'dark'">dark_mode</mat-icon>
            <mat-icon *ngIf="actualTheme() !== 'dark'">light_mode</mat-icon>
          </button>

          <!-- user -->
          <button mat-icon-button matTooltip="Perfil de usuario"
                  class="!bg-primary !text-primary-foreground">
            <mat-icon>account_circle</mat-icon>
          </button>
        </div>

        <!-- Mobile Actions -->
        <div class="flex md:hidden items-center gap-2">
          <!-- theme -->
          <button mat-icon-button (click)="toggleTheme()"
                  [matTooltip]="actualTheme() === 'dark' ? 'Cambiar a claro' : 'Cambiar a oscuro'">
            <mat-icon *ngIf="actualTheme() === 'dark'">dark_mode</mat-icon>
            <mat-icon *ngIf="actualTheme() !== 'dark'">light_mode</mat-icon>
          </button>

          <!-- hamburger menu -->
          <button mat-icon-button (click)="toggleMobileMenu()" aria-label="Abrir/Cerrar menú">
            <mat-icon *ngIf="!isMobileOpen">menu</mat-icon>
            <mat-icon *ngIf="isMobileOpen">close</mat-icon>
          </button>
        </div>
      </ng-container>

      <!-- Mobile Menu (mostrado sólo si NO es minimal y mobileMenuOpen) -->
      <ng-container *ngIf="!isMinimal && isMobileOpen">
        <nav class="md:hidden pb-4 border-t border-border mt-0 pt-4">
          <div class="space-y-1">

            <a routerLink="/results" routerLinkActive="bg-primary text-primary-foreground"
              (click)="closeMobileMenu()"
              class="block w-full text-left px-4 py-3 rounded-md text-sm font-medium">
              Resultados
            </a>

            <a routerLink="/my-news" routerLinkActive="bg-primary text-primary-foreground"
              (click)="closeMobileMenu()"
              class="block w-full text-left px-4 py-3 rounded-md text-sm font-medium">
              Mis Noticias
            </a>

            <a routerLink="/statistics" routerLinkActive="bg-primary text-primary-foreground"
              (click)="closeMobileMenu()"
              class="block w-full text-left px-4 py-3 rounded-md text-sm font-medium">
              Estadísticas
            </a>

          </div>
        </nav>
      </ng-container>

    </div>
  </div>
</header>
